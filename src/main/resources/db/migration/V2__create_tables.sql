CREATE TABLE ${flyway:defaultSchema}.students
(
    students_id             BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    username                VARCHAR(255)                            NOT NULL,
    password                VARCHAR(255)                            NOT NULL,
    first_name              VARCHAR(255),
    last_name               VARCHAR(255),
    middle_name             VARCHAR(255),
    date_birth              DATE,
    receipt_date            DATE,
    university_name         VARCHAR(255),
    course_title            VARCHAR(255),
    course_number           INTEGER,
    average_grade           DECIMAL(4),
--    Форма образования очно/заочно
    study_form              VARCHAR(255),
--    Форма обучения бюджет/контракт
    education_form          VARCHAR(255),
    type_high_education     VARCHAR(255),
    stipend_availability    BOOLEAN,
    local_resident          BOOLEAN,

    CONSTRAINT pk_students PRIMARY KEY (students_id)
);

CREATE TABLE ${flyway:defaultSchema}.hrs
(
    hrs_id      BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    username    VARCHAR(255)                            NOT NULL,
    password    VARCHAR(255)                            NOT NULL,

    CONSTRAINT pk_hrs PRIMARY KEY (hrs_id)
);

CREATE TABLE ${flyway:defaultSchema}.dynamic_progress
(
    progress_id                 BIGINT  GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    progress_date               DATE                                     NOT NULL,
    number_students             BIGINT                                   NOT NULL,
    total_amount_scholarship    BIGINT                                   NOT NULL,

    CONSTRAINT pk_dynamic_progress PRIMARY KEY (progress_id)
);

CREATE TABLE ${flyway:defaultSchema}.internship_card
(
    internship_card_id          BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    internship_title            VARCHAR(255)                            NOT NULL,
    organization_name           VARCHAR(255)                            NOT NULL,
    internship_description      VARCHAR(255)                            NOT NULL,
    internship_specialization   VARCHAR(255)                            NOT NULL,
    internship_schedule         VARCHAR(255)                            NOT NULL,
    internship_type             VARCHAR(255)                            NOT NULL,
    hrs_id                      BIGINT                                  NOT NULL,

    CONSTRAINT pk_internship_card PRIMARY KEY (internship_card_id)
);

ALTER TABLE ${flyway:defaultSchema}.internship_card
    ADD CONSTRAINT fk_internship_card_on_hr FOREIGN KEY (hrs_id) REFERENCES hrs (hrs_id)
